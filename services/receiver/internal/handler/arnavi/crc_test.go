package arnavi

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

const ()

func TestCrc(t *testing.T) {
	/*	dumpPacket1 := []byte{
		0x5B,
		0x01,
		0x01,       // type
		0x3C, 0x00, // size   60
		0xFD, 0x5A, 0xAA, 0x5A, //time unixtime 0x506BF1E3= 1349251555(unix time) = Wed, 03 Oct 2012 08:05:55 GMT
		0x03, 0x95, 0x8B, 0x5E, 0x42,
		0x04, 0x8F, 0xD5, 0x14, 0x42,
		0x05, 0x00, 0x15, 0x77, 0x00,
		0x97, 0xDB, 0x00, 0x00, 0x00,
		0x07, 0x5F, 0xD6, 0x9B, 0x13,
		0x08, 0x02, 0xFA, 0x00, 0x18,
		0x09, 0x00, 0xD0, 0xC5, 0x64,
		0x01, 0x0F, 0x11, 0xEA, 0x3A,
		0x5B, 0x07, 0x00, 0x09, 0x01,
		0x5C, 0x00, 0x00, 0x9C, 0x00,
		0x5D, 0x00, 0x00, 0x8C, 0x00,
		0xFA, 0x32, 0x01, 0x00, 0x00,
		0xA6,
		0x5D,
	} */
	dumpPacket1 := []byte{
		0x5b, 0x20,
		0x01,
		0x2d, 0x00,
		0x91, 0xc2, 0x9d, 0x68, 0x03, 0xf1, 0xdc, 0x5f, 0x42, 0x04, 0x14,
		0xb2, 0x15, 0x42, 0x05, 0x76, 0x5d, 0x1a, 0x00, 0x08, 0x63, 0xfa, 0x00, 0x1c, 0x96, 0x92, 0x0d,
		0x00, 0x00, 0x63, 0x53, 0x80, 0x00, 0x02, 0x01, 0x02, 0x00, 0xf8, 0x5d, 0x06, 0x01, 0x00, 0x00,
		0x00, 0x47, 0x58, 0x1b, 0x1a, 0x23,
		0x20, 0x5d,
	}

	crcN := Crc_sum(dumpPacket1[5 : len(dumpPacket1)-3])
	crcT := dumpPacket1[len(dumpPacket1)-2]
	var err error
	if assert.NoError(t, err) {
		assert.Equal(t, crcN, crcT)
	}
}
